# ejemplo-clase-
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Bot de Funciones: Dominio, Rango y As√≠ntotas</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body {
      background: #f0e6ff;
      font-family: 'Segoe UI', sans-serif;
      text-align: center;
      padding: 30px;
    }
    .bot-box {
      background: white;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 0 15px #aaa;
      max-width: 800px;
      margin: auto;
    }
    input, button {
      padding: 10px;
      font-size: 16px;
      margin-top: 10px;
      width: 80%;
    }
    .respuesta {
      font-weight: bold;
      color: #6a1b9a;
      margin-top: 20px;
      white-space: pre-line;
    }
    #grafica {
      margin-top: 30px;
    }
  </style>
</head>
<body>
  <div class="bot-box">
    <h2>ü§ñ Bot de Dominio, Rango y As√≠ntotas</h2>
    <input type="text" id="funcionInput" placeholder="Ej: f(x) = 1/(x-2)">
    <br>
    <button onclick="analizarFuncion()">Resolver</button>
    <div class="respuesta" id="respuesta"></div>
    <div id="grafica"></div>
  </div>

  <script>
    function hablar(texto) {
      const voz = new SpeechSynthesisUtterance(texto);
      voz.lang = "es-ES";
      speechSynthesis.speak(voz);
    }

    function analizarFuncion() {
      const entrada = document.getElementById("funcionInput").value.trim().toLowerCase();
      const salida = document.getElementById("respuesta");
      const expr = entrada.replace("f(x)=", "").replace("^", "**");

      // Validaci√≥n de sintaxis
      let f;
      try {
        f = new Function("x", "return " + expr);
        f(1);
      } catch (error) {
        const msg = "‚ö†Ô∏è Error: funci√≥n mal escrita. Verifica la sintaxis.";
        salida.innerText = msg;
        hablar(msg);
        return;
      }

      let tipo = "Desconocido";
      let dominio = "Df: {x ‚àà ‚Ñù}";
      let rango = "Rf: {y ‚àà ‚Ñù}";
      let asintotasVert = [];
      let asintotasHorz = null;
      let respuesta = "";

      try {
        // Clasificaci√≥n
        if (expr.includes("**2")) tipo = "Cuadr√°tica";
        else if (expr.includes("/") && expr.includes("x")) tipo = "Racional";
        else if (expr.includes("x")) tipo = "Lineal";
        else tipo = "Constante";

        // Calcular as√≠ntotas verticales
        const denominadores = expr.match(/\/\(([^)]+)\)/g);
        if (denominadores) {
          denominadores.forEach(p => {
            const ecuacion = p.replace("/(", "").replace(")", "");
            const raiz = resolverCorte(ecuacion);
            if (raiz !== null) {
              asintotasVert.push(raiz);
              dominio = `Df: {x ‚àà ‚Ñù | x ‚â† ${asintotasVert.join(", ")}}`;
            }
          });
        }

        // Calcular as√≠ntota horizontal (solo racional simple)
        const numeradorGrado = gradoPolinomio(expr.split("/")[0]);
        const denominadorGrado = gradoPolinomio(expr.split("/")[1]);
        if (denominadorGrado > numeradorGrado) {
          asintotasHorz = 0;
          rango = "Rf: {y ‚àà ‚Ñù | y ‚â† 0}";
        }

        // Crear mensaje
        respuesta = `üìå Tipo de funci√≥n: ${tipo}
üß† Dominio: ${dominio}
üìà Rango: ${rango}
‚ö†Ô∏è As√≠ntotas Verticales: ${asintotasVert.length > 0 ? asintotasVert.map(x => "x = " + x).join(", ") : "Ninguna"}
‚ûñ As√≠ntota Horizontal: ${asintotasHorz !== null ? "y = " + asintotasHorz : "Ninguna"}`;

        salida.innerText = respuesta;
        hablar(respuesta.replace(/\n/g, ". "));

        // Crear gr√°fico
        const x = [], y = [];
        for (let i = -20; i <= 20; i += 0.1) {
          if (asintotasVert.includes(Math.round(i * 100) / 100)) {
            x.push(i);
            y.push(null);
            continue;
          }
          try {
            const val = f(i);
            x.push(i);
            y.push(isFinite(val) ? val : null);
          } catch {
            x.push(i);
            y.push(null);
          }
        }

        const data = [{
          x: x,
          y: y,
          type: 'scatter',
          mode: 'lines',
          name: 'Funci√≥n',
          line: { color: '#8e24aa' }
        }];

        // A√±adir as√≠ntotas verticales (rojas)
        asintotasVert.forEach(v => {
          data.push({
            x: [v, v],
            y: [-20, 20],
            type: 'scatter',
            mode: 'lines',
            name: `As√≠ntota x = ${v}`,
            line: { color: 'red', dash: 'dash' },
            hoverinfo: 'skip',
            showlegend: true
          });
        });

        // A√±adir as√≠ntota horizontal (azul)
        if (asintotasHorz !== null) {
          data.push({
            x: [-20, 20],
            y: [asintotasHorz, asintotasHorz],
            type: 'scatter',
            mode: 'lines',
            name: `As√≠ntota y = ${asintotasHorz}`,
            line: { color: 'blue', dash: 'dot' },
            hoverinfo: 'skip',
            showlegend: true
          });
        }

        Plotly.newPlot("grafica", data, {
          title: "Gr√°fica de la funci√≥n",
          xaxis: { title: "x" },
          yaxis: { title: "f(x)" }
        });

      } catch (e) {
        const msg = "‚ùå Ocurri√≥ un error inesperado.";
        salida.innerText = msg;
        hablar(msg);
      }
    }

    function resolverCorte(expresion) {
      try {
        if (expresion.includes("x")) {
          let parts = expresion.split("x");
          let coef = parts[0] === "" ? 1 : parseFloat(parts[0]);
          let constante = parts[1] ? parseFloat(parts[1]) : 0;
          return Math.round((-constante / coef) * 100) / 100;
        }
      } catch {
        return null;
      }
      return null;
    }

    function gradoPolinomio(expr) {
      const match = expr.match(/x\s*\*\*\s*(\d)/);
      if (match) return parseInt(match[1]);
      if (expr.includes("x")) return 1;
      return 0;
    }
  </script>
</body>
</html>
