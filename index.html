# ejemplo-clase-
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Bot: Dominio, Rango y As√≠ntotas</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body {
      background: #f0e6ff;
      font-family: 'Segoe UI', sans-serif;
      text-align: center;
      padding: 30px;
    }
    .bot-box {
      background: white;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 0 15px #aaa;
      max-width: 800px;
      margin: auto;
    }
    input, button {
      padding: 10px;
      font-size: 16px;
      margin-top: 10px;
      width: 80%;
    }
    .respuesta {
      font-weight: bold;
      color: #6a1b9a;
      margin-top: 20px;
      white-space: pre-line;
    }
    #grafica {
      margin-top: 30px;
    }
  </style>
</head>
<body>
  <div class="bot-box">
    <h2>ü§ñ Bot de Dominio, Rango y As√≠ntotas</h2>
    <input type="text" id="funcionInput" placeholder="Ej: f(x) = x^2 - 4, f(x) = 1/(x-2)">
    <br>
    <button onclick="analizarFuncion()">Resolver</button>
    <div class="respuesta" id="respuesta"></div>
    <div id="grafica"></div>
  </div>

  <script>
    function hablar(texto) {
      const voz = new SpeechSynthesisUtterance(texto);
      voz.lang = "es-ES";
      speechSynthesis.speak(voz);
    }

    function analizarFuncion() {
      const entrada = document.getElementById("funcionInput").value.trim().toLowerCase();
      const salida = document.getElementById("respuesta");
      const expr = entrada.replace("f(x)=", "").replace("^", "**");

      // Validaci√≥n mejorada
      let f;
      try {
        f = new Function("x", "return " + expr);
        f(1); // probar si funciona con x = 1
      } catch (error) {
        const mensajeError = "‚ö†Ô∏è Error: funci√≥n mal escrita. Verifica la sintaxis.";
        salida.innerText = mensajeError;
        hablar(mensajeError);
        return;
      }

      let tipo = "";
      let dominio = "Df: {x ‚àà ‚Ñù}";
      let rango = "Rf: {y ‚àà ‚Ñù}";
      let asintotasVert = "Ninguna";
      let asintotasHorz = "Ninguna";
      let respuesta = "";

      try {
        // Clasificaci√≥n de la funci√≥n
        if (expr.includes("**2")) {
          tipo = "Cuadr√°tica";
          rango = "Rf: {y ‚àà ‚Ñù | y ‚â• valor m√≠nimo de la par√°bola}";
        } else if (expr.includes("/") && expr.includes("x")) {
          tipo = "Racional";

          // As√≠ntotas verticales
          let posibles = expr.match(/\(.*?\)/g);
          if (posibles) {
            posibles.forEach((parte) => {
              if (parte.includes("x")) {
                const sinParentesis = parte.replace(/[()]/g, "");
                const solucion = resolverCorte(sinParentesis);
                if (solucion !== null) {
                  dominio = `Df: {x ‚àà ‚Ñù | x ‚â† ${solucion}}`;
                  asintotasVert = `x = ${solucion}`;
                }
              }
            });
          }

          // As√≠ntotas horizontales (solo estimada para este caso)
          if (expr.match(/x\s*\*\*\s*\d/)) {
            asintotasHorz = "y = 0 (cuando grado de numerador < denominador)";
            rango = "Rf: {y ‚àà ‚Ñù | y ‚â† 0}";
          }
        } else if (expr.includes("x")) {
          tipo = "Lineal";
        } else {
          tipo = "Constante o no v√°lida";
        }

        // Crear respuesta
        respuesta = `üìå Tipo de funci√≥n: ${tipo}
üß† Dominio: ${dominio}
üìà Rango: ${rango}
‚ö†Ô∏è As√≠ntotas Verticales: ${asintotasVert}
‚ûñ As√≠ntotas Horizontales: ${asintotasHorz}`;

        salida.innerText = respuesta;
        hablar(respuesta.replace(/\n/g, ". "));

        // Graficar
        const x = [], y = [];
        for (let i = -20; i <= 20; i += 0.1) {
          try {
            const val = f(i);
            if (isFinite(val)) {
              x.push(i);
              y.push(val);
            } else {
              x.push(i);
              y.push(null);
            }
          } catch {
            x.push(i);
            y.push(null);
          }
        }

        Plotly.newPlot("grafica", [{
          x: x,
          y: y,
          type: 'scatter',
          mode: 'lines',
          line: { color: '#8e24aa' }
        }], {
          title: "Gr√°fica de la funci√≥n",
          xaxis: { title: "x" },
          yaxis: { title: "f(x)" }
        });

      } catch (e) {
        const error = "‚ö†Ô∏è Error inesperado. Revisa la funci√≥n.";
        salida.innerText = error;
        hablar(error);
      }
    }

    function resolverCorte(expresion) {
      try {
        if (expresion.includes("x")) {
          let parts = expresion.split("x");
          let coef = parts[0] === "" ? 1 : parseFloat(parts[0]);
          let constante = parts[1] ? parseFloat(parts[1]) : 0;
          let solucion = -constante / coef;
          return Math.round(solucion * 100) / 100;
        }
      } catch {
        return null;
      }
      return null;
    }
  </script>
</body>
</html>

